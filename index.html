<script>
async function send() {
  let input = document.getElementById("userInput");
  let msg = input.value.trim();
  if (msg === "") return;

  let chat = document.getElementById("chatBox");
  chat.innerHTML += `<div class="user">üßë You: ${msg}</div>`;
  chat.innerHTML += `<div class="bot">ü§ñ Bot: Thinking...</div>`;
  chat.scrollTop = chat.scrollHeight;
  input.value = "";

  try {
    let res = await fetch("https://chatbot-backend.ankandeb2009.workers.dev", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: msg })
    });

    let data = await res.json();
    let reply = data.choices[0].message.content;

    chat.lastChild.innerHTML = `ü§ñ Bot: ${reply}`;
    chat.scrollTop = chat.scrollHeight;

  } catch (e) {
    chat.lastChild.innerHTML = "‚ùå Bot: Server error";
  }
}
</script>
